#This mess of a .txt file brought to you by Domaxs.
namespace = SANDR

#From on_character_ask_to_join_society/press join button
character_event = {
	id = SANDR.100
	hide_window = yes
	is_triggered_only = yes
	trigger = {
		FROM = { leader = { society_member_of = sand_sailer_racers } }
	}
	immediate = {
		FROM = { leader = { character_event = { id = SANDR.200 } } }
	}
}

#Ping event
character_event = {
	id = SANDR.200
	hide_window = yes
	is_triggered_only = yes
	immediate = {
		FROM = { letter_event = { id = SANDR.300 } } #send event back
	}
}

#Welcome letter
letter_event = {
	id = SANDR.300
	desc = EVTDESC_SANDR.300
	border = GFX_event_letter_frame_diplomacy

	is_triggered_only = yes

	option = {
		name = EVTOPTA_SANDR.40
		join_society = sand_sailer_racers
		clr_character_flag = society_join_block
		add_trait = sand_racer
		hidden_effect = {
			if = {
				limit = {
					trait = sand_sailer
				}
				remove_trait = sand_sailer
			}
		}
	}
	option = { #don't
		name = EVTOPTB_SANDR.50
	}
}

character_event = {
	id = SANDR.400

	hide_window = yes

	trigger = {
		has_character_flag = has_sent_request_to_rank_up
	}

	is_triggered_only = yes

	immediate = {
		if = {
			limit = { is_in_society = yes }
			random_society_member = {
				limit = {
					is_society_grandmaster = yes
					same_society_as = ROOT
				}
				character_event = { id = SANDR.500 }
			}
		}
		if = {
			limit = { is_in_society = no }
			clr_character_flag = has_sent_request_to_rank_up
		}
	}
}

# Grandmaster gets the rank-up request
character_event = {
	id = SANDR.500

	hide_window = yes

	is_triggered_only = yes

	immediate = {
		event_target:rank_up_target = { letter_event = { id = SANDR.600 } }
	}
}

#Grand master approves my request
letter_event = {
	id = SANDR.600
	desc = EVTDESC_SANDR.620
	border = GFX_event_letter_frame_diplomacy

	trigger = {
		society_rank < 4
		has_character_flag = has_sent_request_to_rank_up
	}

	is_triggered_only = yes


	option = {
		name = EVTOPTA_SANDR.621
		if = { limit = { society_rank < 4 } #if not max rank, rank up
			society_rank_up = 1
		}
		clr_character_flag = has_sent_request_to_rank_up
	}
}

####################SAND SAILER RACERS QUEST TOMBOLA FRAMEWORK##########################

character_event = {
	id = SANDR.1000
	hide_window = yes

	is_triggered_only = yes
	capable_only = yes
	is_in_society = yes


	trigger = {
		society_member_of = sand_sailer_racers
		is_society_grandmaster = no
		has_any_quest = no
		NOT = { is_inaccessible_trigger = yes }
		NOT = { has_character_modifier = quest_cooldown_timer }
	}

   immediate = {
		random_society_member = {
			limit = {
				is_society_grandmaster = yes
				same_society_as = ROOT
			}
			save_event_target_as = quest_collaborator
		}
		#Randomizes mission
		random_list = {
			25 = { event_target:quest_collaborator = { character_event = { id = SANDR.1001 months = 1 } } } #will send the quest to the quest_collaborator, which will then offer it back to you

			25 = { event_target:quest_collaborator = { character_event = { id = SANDR.1002 months = 3  } } }  #<------maintain sand sailer is a lengthy quest so it will (hopefully) appear less in the tombola.

			25 = { event_target:quest_collaborator = { character_event = { id = SANDR.1003 months = 1  } } }

			#25 = { event_target:quest_collaborator = { character_event = { id = SANDR.1004 months = 1  } } }

			50 = { # AI bypasses missions at times and goes directly to success/failure, increase the 50% if you add more mission to balance or you could delete this whole { } if you want the AI to do real missions
				modifier = {
					factor = 0
					ai = no
				}
				random_list = {
					70 = { #success, harder the more influencial the society is, Sand SOciety might not need this.
						modifier = {
							factor = 0.9
							society_influence >= 30
						}
						modifier = {
							factor = 0.9
							society_influence >= 40
						}
						modifier = {
							factor = 0.8
							society_influence >= 50
						}
						modifier = {
							factor = 0.7
							society_influence >= 70
						}
						modifier = {
							factor = 0.6
							society_influence >= 80
						}
						modifier = {
							factor = 0.5
							society_influence >= 90
						}
					}
					30 = { }
				}
			}

			100 = { #AI refuse mission
				modifier = {
					factor = 0
					ai = no
				}
			}
		}
	}
}
#This is the quest_collaborator receiving the missions and giving it back to you.
character_event = {
	id = SANDR.1001
	hide_window = yes
	is_triggered_only = yes

	immediate = {
		FROM = {
			society_quest_event = {
			id = SANDR.1010 days = 7			#Practice Sailing   sand_quest_race_training
			}
		}
	}
}
character_event = {
	id = SANDR.1002
	hide_window = yes
	is_triggered_only = yes

	immediate = {
		FROM = {
			society_quest_event = {
			id = SANDR.1030 days = 7			#Maintain Sand Sailer   sand_quest_sailer
			}
		}
	}
}

character_event = {
	id = SANDR.1003
	hide_window = yes
	is_triggered_only = yes

	immediate = {
		FROM = {
			society_quest_event = {
			id = SANDR.1073 days = 7		#Donation to society (cheap quest, i know)
			}
		}
	}
}

# character_event = {
	# id = SANDR.1004
	# hide_window = yes
	# is_triggered_only = yes

	# immediate = {
		# FROM = {
			# society_quest_event = {
			# id = SANDR. days = 7		#exhibition race quest
			# }
		# }
	# }
# }
####################RACE TRAINING QUEST FRAMEWORK I#######################
society_quest_event = {
	id = SANDR.1010
	desc = EVTDESC_SANDR.1010
	border = GFX_event_letter_frame_war

	is_triggered_only = yes
	
	trigger = {
		society_member_of = sand_sailer_racers
	}

	option = {
		name = ACCEPT
		set_quest = sand_quest_race_training
		set_character_flag = sand_quest_race_training
	}

	option = {
		name = DECLINE
		hidden_effect = {
			add_character_modifier = {
				name = quest_cooldown_timer
				hidden = yes
				days = 1050
			}
		}
		ai_chance = { factor = 0 }
	}
}

character_event = {  #completion is sent to grandmaster---Final events of all quest chains in this file should chain here.
	id = SANDR.1011
	is_triggered_only = yes
	hide_window = yes

	immediate = {
		random_society_member = {
			limit = {
				same_society_as = ROOT
				is_society_grandmaster = yes
			}
			character_event = {
				id = SANDR.1012
			}
		}
	}
}

character_event = {   #the completion hub for all quests  (note to self: don't link them here, do it to the event above but edit below if adding new quests.)
	id = SANDR.1012
	is_triggered_only = yes
	hide_window = yes

	immediate = {
		if = {
			limit = {
				FROM = {has_quest = sand_quest_race_training}
			}
			FROM = {letter_event = {id = SANDR.1013}}
		}

		if = {
			limit = {
				FROM = {has_quest = sand_quest_sailer}
			}
			ROOT = { character_event = {id = SANDR.1031} }
		}
		if = {
			limit = {
				FROM = {has_quest = donate_to_sand_society}
			}
			FROM = {letter_event = {id = SANDR.1074}}
		}
		# if = {
			# limit = {
				# FROM = {has_quest = exhibition_race}
			# }
			# FROM = {letter_event = {id = SANDR.}}
		# }
	}
}
letter_event = {   #Completion letter for sand sailer practice
	id = SANDR.1013
	desc = EVTDESC_SANDR_1013
	border = GFX_event_letter_frame_war

	is_triggered_only = yes

	trigger = { has_quest = sand_quest_race_training }

	option = {
		name = EVTOPT_SANDR_1013
		clr_quest = sand_quest_race_training
		hidden_tooltip = {
			remove_trait = stressed
			remove_trait = travelling
			clr_character_flag = good_manuever
			add_character_modifier = {
				name = quest_cooldown_timer
				hidden = yes
				days = 1000
			}
		}
		change_society_currency = 50
	}
}

letter_event = {   #failure letter for sand sailer practice
	id = SANDR.1027
	desc = EVTDESC_SANDR.1027
	border = GFX_event_letter_frame_war
	is_triggered_only = yes

	trigger = { has_quest = sand_quest_race_training }

	option = {
		name = EVTOPTA_SANDR.1027
			if = {
				limit = { has_quest = sand_quest_race_training }
				clr_quest = { id = sand_quest_race_training failure = yes}
			}
			if = {
				limit = { trait = stressed }
				remove_trait = stressed
			}
			random = {
				chance = 15
				add_trait = wounded
			}
			remove_trait = travelling
	}
}
#################RACE TRAINING FRAMEWORK PART II: ACTUAL EVENT BOOGALOO###############

character_event = {	#Very Beginning of race training chain
	id = SANDR.1020
	desc = EVTDESC_SANDR.1020
	picture = GFX_evt_wanshi_desert
	border = GFX_event_normal_frame_war
	is_triggered_only = yes

	option = {
		name = EVTOPTA_SANDR.1020
		hidden_tooltip = {
			character_event = { id = SANDR.1022 months = 1 } # Next stage in quest
		}
		add_trait = travelling
	}
}

character_event = {
	id = SANDR.1022
	desc = EVTDESC_SANDR.1022
	picture = GFX_evt_wanshi_desert
	border = GFX_event_normal_frame_war
	is_triggered_only = yes

	option = {
		name = EVTOPTA_SANDR.1022
		custom_tooltip = {
			text = HARD_MANUVER
			random_list = {
				65 = {
					modifier = {
						factor = 1.5
						martial >= 10
					}
					character_event = {id = SANDR.1025 days = 1}
					set_character_flag = good_manuever
					prestige = 25
					modifier = {
						factor = 1.5
						trait = powerful_bender
					}
					modifier = {
						factor = 2.0
						trait = master_bender
					}
					modifier = {
						factor = 3.0
						trait = legendary_bender
					}
				}
				35 = {
					modifier = {
						factor = 1.5
						martial < 7
					}
					modifier = {
						factor = -2.0
						martial > 14
					}
					character_event = { id = SANDR.1028 days = 1 }
				}
			}
		}
	}
	option = {
		name = EVTOPTB_SANDR.1022
		custom_tooltip = {
			text = TRICKY_MANUVER
			random_list = {
				75 = {
					modifier = {
						factor = 1.5
						martial >= 8
					}
					modifier = {
						factor = 1.5
						trait = powerful_bender
					}
					modifier = {
						factor = 2.0
						trait = master_bender
					}
					modifier = {
						factor = 3.0
						trait = legendary_bender
					}
					character_event = {id = SANDR.1025 days = 1}
					set_character_flag = good_manuever
					prestige = 25
				}

				25 = {
					modifier = {
						factor = 1.5
						martial < 5
					}
					modifier = {
						factor = -2.0
						martial > 10
					}
					character_event = { id = SANDR.1028 days = 1 }
				}
			}
		}
	}
	option = {
		name = EVTOPTC_SANDR.1022
		character_event = {id = SANDR.1023 days = 15}
	}
}
character_event = {  #Good manuever practice, quest chain continues.
	id = SANDR.1025
	desc = EVTDESC_SANDR.1025
	border = GFX_event_normal_frame_war
	picture = GFX_evt_wanshi_desert
	is_triggered_only = yes

	option = {
		name = EVTOPTA_SANDR.1025
		character_event = {id = SANDR.1023 days = 26}
	}
}
character_event = {  #Bad manuever practice, ouch!
	id = SANDR.1028
	desc = EVTDESC_SANDR.1028
	picture = GFX_evt_wanshi_desert
	border = GFX_event_normal_frame_diplomacy
	is_triggered_only = yes

	option = {
		name = EVTOPTA_SANDR.1028
		custom_tooltip = {
			text = OUCH
			character_event = {id = SANDR.1027 days = 1 }
		}
	}
}
character_event = {
	id = SANDR.1023
	desc = EVTDESC_SANDR.1023
	picture = GFX_evt_moonlit_mountains_hf
	border = GFX_event_normal_frame_war
	is_triggered_only = yes

	option = {
		name = EVTOPTA_SANDR.1023
		trigger = {
			ROOT = {
				NOR = {
					trait = ambitious
					trait = content
				}
			}
		}
		if = {
			limit = {
				ROOT = {
					NOT = { trait = content }
					NOT = { trait = ambitious }
				}
			}
			random = {
				chance = 30
				add_trait =  ambitious
			}
		}
		character_event = { id = SANDR.1024 days = 14 }
	}
	option = {
		name = EVTOPTB_SANDR.1023
		trigger = {
			ROOT = {
				NOR = {
					trait = ambitious
					trait = content
				}
			}
		}
		if = {
			limit = {
				ROOT = {
					NOT = { trait = content }
					NOT = { trait = ambitious }
				}
			}
			random = {
				chance = 30
				add_trait =  content
			}
		}
		character_event = { id = SANDR.1024 days = 14 }
	}
	option = {
		name = EVTOPTC_SANDR.1023  #If you already have one of the traits or don't want a trait
		custom_tooltip = {
		text = skip_option
		}
		character_event = { id = SANDR.1024 days = 14 }
	}
}
character_event = {
	id = SANDR.1024
	desc = EVTDESC_SANDR.1024
	picture = GFX_evt_wanshi_desert
	border = GFX_event_normal_frame_war
	is_triggered_only = yes

	option = { #Hard Routine
		name = EVTOPTA_SANDR.1024
		add_trait = stressed
		random_list = {
			25 = {
				custom_tooltip = {
					text = RESULT.GOOD
					hidden_tooltip = {
						character_event = { id = SANDR.1050 days = 10 } # Next stage in quest
						}
					}
				modifier = {
					factor = 1.3
					martial >= 12
				}
				modifier = {
					factor = 2.0
					has_character_flag = good_manuever
				}
			}
			25 = {
				custom_tooltip = {
					text = RESULT.NORMAL
					hidden_tooltip = {
						character_event = { id = SANDR.1051 days = 10 }
					}
				}
				modifier = {
					factor = 1.3
					martial = 9
				}
			}
			25 = {
				custom_tooltip = {
					text = RESULT.POOR
					hidden_tooltip = {
						character_event = { id = SANDR.1052 days = 10 }
					}
				}
				modifier = {
					factor = 2.0
					martial < 6
				}
			}
		}
		prestige = 50
	}
	option = { #Normal Routine
		name = EVTOPTB_SANDR.1024
		random_list = {
			25 = {
				custom_tooltip = {
					text = RESULT.GOOD
					hidden_tooltip = {
						character_event = { id = SANDR.1050 days = 10 }
					}
				}
				modifier = {
					factor = 1.2
					martial >= 10
				}
				modifier = {
					factor = 1.5
					has_character_flag = good_manuever
				}
			}
			25 = {
				custom_tooltip = {
					text = RESULT.NORMAL
					hidden_tooltip = {
						character_event = { id = SANDR.1051 days = 10 }
					}
				}
				modifier = {
					factor = 1.2
					martial >= 6
					NOT = { martial <= 10 }
				}
			}
			25 = {
				custom_tooltip = {
					text = RESULT.POOR
					hidden_tooltip = {
						character_event = { id = SANDR.1052 days = 10 }
					}
				}
				modifier = {
					factor = 1.2
					martial < 4
				}
			}
		}
		prestige = 10
	}
}
#GOOD TRAINING RESULT
character_event = {
	id = SANDR.1050
	desc = EVTDESC_SANDR.1050
	border = GFX_event_normal_frame_war
	picture = GFX_evt_wanshi_desert
	is_triggered_only = yes

	option = {
		name = EVTOPTA_SANDR.1050
		change_martial = 1
		health = 1
		hidden_tooltip = {
			if = {
				limit = { has_quest = sand_quest_race_training }
				character_event = { id = SANDR.1011 days = 1 }
			}
		}
	}
	option = {
		name = EVTOPTB_SANDR.1050
		trigger = {
			OR ={
				trait = incompetent_bender
				trait = competent_bender
			}
		}
		if = {
			limit = { ROOT = { trait = incompetent_bender } }
			remove_trait = incompetent_bender
			add_trait = competent_bender
		}
		if = {
			limit = { ROOT = { trait = competent_bender } }
			random = {
				chance = 10
				remove_trait = competent_bender
				add_trait = powerful_bender
			}
		}
		character_event = { id = SANDR.1011 days = 1 }
	}
}

#NORMAL TRAINING RESULT
character_event = {
	id = SANDR.1051
	desc = EVTDESC_SANDR.1051
	border = GFX_event_normal_frame_war
	picture = GFX_evt_wanshi_desert
	is_triggered_only = yes

	option = {
		name = EVTOPTA_SANDR.1051
		change_martial = 1
		hidden_tooltip = {
			if = {
				limit = { has_quest = sand_quest_race_training }
				character_event = { id = SANDR.1011 days = 1 }
			}
		}
	}
}

#POOR TRAINING
character_event = {
	id = SANDR.1052
	desc = EVTDESC_SANDR.1052
	border = GFX_event_normal_frame_war
	picture = GFX_evt_wanshi_desert
	is_triggered_only = yes

	option = {
		name = EVTOPTA_SANDR.1052
		change_martial = -1
		hidden_tooltip = {
			if = {
				limit = { has_quest = sand_quest_race_training }
				character_event = { id = SANDR.1011 days = 1 }
			}
		}
	}
}

#MAINTAIN SAILER EVENT FRAMEWORK

society_quest_event = {  #Sailer Maintain quest proposal letter
	id = SANDR.1030
	desc = EVTDESC_SANDR.1030
	border = GFX_event_letter_frame_war

	is_triggered_only = yes
	
	trigger = {
		society_member_of = sand_sailer_racers
	}

	option = {
		name = ACCEPT
		set_quest = sand_quest_sailer
		set_character_flag = sand_quest_sailer
	}

	option = {
		name = DECLINE
		hidden_effect = {
			add_character_modifier = {
				name = quest_cooldown_timer
				hidden = yes
				days = 1050
			}
		}
		ai_chance = { factor = 0 }
	}
}

character_event = { #mission completion hub
	id = SANDR.1031
	is_triggered_only = yes
	hide_window = yes

	immediate = {
		if = {
			limit = {
				FROMFROM = {
					OR = {
						has_character_flag = WOOD
						has_character_flag = SAIL
					}
				}
			}
			FROMFROM = {letter_event = { id = SANDR.1032 days = 2 }}
		}
		if = {
			limit = {
				FROMFROM = {
					has_character_flag = ROPE
				}
			}
			FROMFROM = {letter_event = { id = SANDR.1033 days = 2 }}
		}
		if = {
			limit = {
				FROMFROM = {
					has_character_flag = COMPASS
				}
			}
			FROMFROM = {letter_event = { id = SANDR.1034 days = 2 }}
		}
	}
}
letter_event = { #completion letter for wood/sail
	id = SANDR.1032
	border = GFX_event_letter_frame_war
	is_triggered_only = yes
	desc = {
		trigger = {
			has_character_flag = WOOD
		}
		text = EVTDESC_SANDR.1032
	}
	desc = {
		trigger = {
			has_character_flag = SAIL
		}
		text = EVTDESCCASE2_SANDR.1032
	}
	desc = {
		trigger = {
			AND = {
				has_character_flag = SAIL
				has_character_flag = maker_died
			}
		}
		text = EVTDESCCASE3_SANDR.1032
	}

	trigger = {
	}
	option = {
		name = EVTOPTA_SANDR.1032
		name = {
			text = EVTOPTACASE2_SANDR.1032
			trigger = {
				has_character_flag = SAIL
			}
		}
		if = {
			limit = {
				has_character_flag = WOOD
			}
			change_society_currency = 200
		}
		if = {
			limit = {
				AND = {
					has_character_flag = SAIL
					has_character_flag = expensive_sail
				}
			}
			change_society_currency = 150
		}
		if = {
			limit = {
				AND = {
					has_character_flag = SAIL
					has_character_flag = moderate_sail
				}
			}
			change_society_currency = 100
		}
		if = {
			limit = {
				AND = {
					has_character_flag = SAIL
					has_character_flag = cheap_sail
				}
			}
			change_society_currency = 50
		}
		clr_quest = sand_quest_sailer
		clr_character_flag = WOOD
		clr_character_flag = SAIL
		remove_trait = travelling
		add_character_modifier = {
			name = quest_cooldown_timer
			hidden = yes
			days = 1000
		}
	}
	option = {
		name = EVTOPTB_SANDR.1032
		trigger = {
			AND = {
				has_character_flag = SAIL
				has_character_flag = maker_died
			}
		}
		change_society_currency = 100
		clr_quest = sand_quest_sailer
		clr_character_flag = SAIL
		clr_character_flag = maker_died
		remove_trait = travelling
		add_character_modifier = {
			name = quest_cooldown_timer
			hidden = yes
			days = 1000
		}
	}
}

letter_event = { # comp letter for rope
	id = SANDR.1033
	desc = EVTDESC_SANDR.1033
	border = GFX_event_letter_frame_war
	is_triggered_only = yes

	trigger = {
	}
	option = {
		name = EVTOPTA_SANDR.1033
		clr_quest = sand_quest_sailer
		add_society_currency_minor_effect = yes
		clr_character_flag = ROPE
		remove_trait = travelling
		add_character_modifier = {
			name = quest_cooldown_timer
			hidden = yes
			days = 1000
		}
	}
}

letter_event = { # comp letter for compass
	id = SANDR.1034
	desc = EVTDESC_SANDR.1034
	border = GFX_event_letter_frame_war
	is_triggered_only = yes

	trigger = {
	}
	option = {
		name = EVTOPTA_SANDR.1034
		clr_quest = sand_quest_sailer
		add_society_currency_minor_effect = yes
		clr_character_flag = COMPASS
		add_character_modifier = {
			name = quest_cooldown_timer
			hidden = yes
			days = 1000
		}
		set_character_flag = has_new_compass
		remove_trait = travelling
	}
}
character_event = { #grandmaster ping event for failures
	id = SANDR.1135
	is_triggered_only = yes
	hide_window = yes

	immediate = {
		random_society_member = {
			limit = {
				same_society_as = ROOT
				is_society_grandmaster = yes
			}
			character_event = {
				id = SANDR.1136
			}
		}
	}
}
character_event = {
	id = SANDR.1136
	is_triggered_only = yes
	hide_window = yes

	option = {
		FROMFROM = {
			trigger_switch = {
				on_trigger = has_character_flag
				WOOD		={FROMFROM = {letter_event = { id = SANDR.1137 }}}
				SAIL		={FROMFROM = {letter_event = { id = SANDR.1138 }}}
				COMPASS		={FROMFROM = {letter_event = { id = SANDR.1139 }}}
			}
		}
	}
}
letter_event = { #wood/failure
	id = SANDR.1137
	desc = EVTDESC_SANDR.1137
	border = GFX_event_letter_frame_war
	is_triggered_only = yes

	option = {
		name = EVTOPTA_SANDR.1137
		clr_quest = { id = sand_quest_sailer failure = yes }
		clr_character_flag = WOOD
		remove_trait = travelling
	}
}
letter_event = { #sail failure
	id = SANDR.1138
	desc = EVTDESC_SANDR.1138
	is_triggered_only = yes

	option = {
		name = EVTOPTA_SANDR.1138
		clr_quest = { id = sand_quest_sailer failure = yes }
		clr_character_flag = SAIL
		remove_trait = travelling
	}
}
letter_event = { #compass failure
	id = SANDR.1139
	desc = EVTDESC_SANDR.1139
	border = GFX_event_letter_frame_war
	is_triggered_only = yes

	option = {
		name = EVTOPTA_SANDR.1139
		clr_quest = { id = sand_quest_sailer failure = yes }
		clr_character_flag = COMPASS
		remove_trait = travelling
	}
}

############MAINTAIN SAND SAILER QUEST FRAMEWORK PART II##############

character_event = {  #Very Beginning of maintain sailer quest line/choose your path
	id = SANDR.1035
	desc = EVTDESC_SANDR.1035
	border = GFX_event_normal_frame_diplomacy
	picture = GFX_evt_wanshi_desert
	is_triggered_only = yes

	option = {
		name = EVTOPTA_SANDR.1035
		custom_tooltip = {
			text = WOOD_CHAIN
			character_event = { id = SANDR.1036 days = 5 } # Replace- wood chain
			set_character_flag = WOOD
			add_trait = travelling
		}
	}
	option = {
		name = EVTOPTB_SANDR.1035
		custom_tooltip = {
			text = ROPE_CHAIN
			character_event = { id = SANDR.1056 days = 5 }   #Replace- rigging chain
			set_character_flag = ROPE
			add_trait = travelling
		}
	}
	option = {
		name = EVTOPTC_SANDR.1035
		custom_tooltip = {
			text = SAIL_CHAIN
			character_event = { id = SANDR.1076 days = 5 }   #Replace- sail chain
			set_character_flag = SAIL
			add_trait = travelling
		}
	}
	option = {
		name = EVTOPTD_SANDR.1035
		trigger = {
			NOR = {
				has_character_flag = has_new_compass
				has_artifact = oldCompass
			}
		}
		custom_tooltip = {
			text = COMPASS_CHAIN
			if = {
				limit = {
					NOT = {has_character_flag = attempted_compass}
				}
				character_event = { id = SANDR.1192 days = 5 }   #Replace- compass chain
				set_character_flag = COMPASS
				add_trait = travelling
			}
			if = {
				limit = {
					has_character_flag = attempted_compass
				}
				character_event = { id = SANDR.1129 days = 5 }
				set_character_flag = COMPASS
				add_trait = travelling
			}
		}
	}
 }
character_event = {		 #Start of wood chain
	id = SANDR.1036
	desc = EVTDESC_SANDR.1036
	border = GFX_event_normal_frame_diplomacy
	picture = GFX_evt_wanshi_desert
	is_triggered_only = yes

	option = {
		name = EVTOPTA_SANDR.1036
		hidden_tooltip = {
			if = {
				limit = { ROOT = { has_wonder = misty_palms_oasis } }
				character_event = { id = SANDR.1037 days = 1 }   #Character heads to Misty Palms instantly if they own it.
			}
			if = {
				limit = { ROOT = { NOT = { has_wonder = misty_palms_oasis } } }
				character_event = { id = SANDR.1037 days = 10 }  #same event, character just has to "travel" to Misty Palms
			}
		}
	}
	option = {
		name = EVTOPTB_SANDR.1036
		hidden_tooltip = {
			character_event = { id = SANDR.1054 days = 3 }	#character stays local (cheaper prices, no dishonorable decisions)
			random = {
				chance = 15
				set_character_flag = marked_for_pai_sho
			}
		}
	}
}

character_event = {	#Character heads to Misty Palms
	id = SANDR.1037
	desc = EVTDESC_SANDR.1037
	border = GFX_event_normal_frame_diplomacy
	picture = GFX_evt_sandbender
	is_triggered_only = yes

	option = {
		name = EVTOPTA_SANDR.1037
		hidden_tooltip = {
			if = {
				limit = {
					has_character_flag = WOOD
				}
				character_event = { id = SANDR.1038 }  #SANDR.1038 is wood frame chain decision hub
			}
			if = {
				limit = {
					has_character_flag = SAIL
				}
				character_event = { id = SANDR.1178 }
			}
		}
	}
}
character_event = {  #wood frame chain decision hub
	id = SANDR.1038
	desc = EVTDESC_SANDR.1038
	border = GFX_event_normal_frame_diplomacy
	picture = GFX_evt_sandbender
	is_triggered_only = yes

	option = {
		name = EVTOPTA_SANDR.1038
		hidden_tooltip = {
			character_event = { id = SANDR.1039 days = 1 }  #chains to honorable decisions
		}
	}
	option = {
		name = EVTOPTB_SANDR.1038
		hidden_tooltip = {
			character_event = { id = SANDR.1040 days = 1 }  #chains to dishonorable decisions
		}
	}
}

character_event = {   #honorable decisions to purchase wooden frame
	id = SANDR.1039
	desc = EVTDESC_SANDR.1039
	border = GFX_event_normal_frame_diplomacy
	picture = GFX_evt_wanshi_desert
	is_triggered_only = yes

	option = {
		name = EVTOPTA_SANDR.1039
		custom_tooltip = {
			text = expensive_frame_a
			wealth = -100
			set_character_flag = has_expensive_frame
			character_event = { id = SANDR.1041 days = 2 }
		}
	}
	option = {
		name = EVTOPTB_SANDR.1039
		custom_tooltip = {
			text = pricey_frame_a
			wealth = -50
			set_character_flag = has_pricey_frame
			character_event = { id = SANDR.1041 days = 2 }
		}
	}
	option = {
		name = EVTOPTC_SANDR.1039
		custom_tooltip = {
			text = cheapest_frame_a
			wealth = -25
			set_character_flag = has_cheapest_frame
			character_event = { id = SANDR.1041 days = 2 }
		}
	}
	option = {
		name = EVTOPTD_SANDR.1039
		custom_tooltip = {
			text = go_back
			character_event = { id = SANDR.1038 }
		}
	}
}

character_event = {	#Dishonorable decisions
	id = SANDR.1040
	desc = EVTDESC_SANDR.1040
	picture = GFX_evt_wanshi_desert
	border = GFX_event_normal_frame_diplomacy
	is_triggered_only = yes

	option = {
		name = EVTOPTA_SANDR.1040
		custom_tooltip = {
			text = expensive_frame_b
			prestige = -75
			set_character_flag = has_expensive_frame
			random_character = {
				limit = {
					# is_within_diplo_range = ROOT
					culture = sandbender_culture
					age = 30
					is_landed = no
					is_in_society = no
				}
				random = {
					chance = 85
					opinion = {
						modifier = opinion_stole_major_item
						who = ROOT
					}
				}
			}
		}
		character_event = { id = SANDR.1041 days = 2 }
	}
	option = {
		name = EVTOPTB_SANDR.1040
		custom_tooltip = {
			text = pricey_frame_b
			prestige = -50
			set_character_flag = has_pricey_frame
			random_character = {
				limit = {
					# is_within_diplo_range = ROOT
					culture = sandbender_culture
					age = 30
					is_in_society = no
					is_landed = no
				}
				random = {
					chance = 50
					opinion = {
						modifier = opinion_stole_average_item
						who = ROOT
					}
				}
			}
		}
		character_event = { id = SANDR.1041 days = 2 }
	}
	option = {
		name = EVTOPTC_SANDR.1040
		custom_tooltip = {
			text = cheapest_frame_b
			prestige = -25
			set_character_flag = has_cheapest_frame
			random_character = {
				limit = {
					# is_within_diplo_range = ROOT
					culture = sandbender_culture
					age = 30
					is_landed = no
					is_in_society = no
				}
				random = {
					chance = 25
					opinion = {
						modifier = opinion_stole_trash_item
						who = ROOT
					}
				}
			}
		}
		character_event = { id = SANDR.1041 days = 2 }
	}
	option = {
		name = EVTOPTD_SANDR.1040
		custom_tooltip = {
			text = go_back
			character_event = { id = SANDR.1038 }
		}
	}
}

character_event = {  #apply wood frame/chains to test run event chain
	id = SANDR.1041
	desc = EVTDESC_SANDR.1041
	picture = GFX_evt_wanshi_desert
	border = GFX_event_normal_frame_diplomacy
	is_triggered_only = yes

	option = { #professional help
		name = EVTOPTA_SANDR.1041
		custom_tooltip = {
			text = prof_help
			wealth = -25
			character_event = {id = SANDR.1043 days = 10}
		}
	}
	option = {
		name = EVTOPTB_SANDR.1041
		custom_tooltip = {
			text = dyi
			random_list = {
				50 = {
					character_event = {id = SANDR.1042 days = 14}
					modifier = {
						factor = 1.5
						OR = {
							stewardship > 10
							trait = architect
						}
					}
				}
				# 50 = {  #failure to put together frame/you suck!
					# character_event = {id = SANDR.10 days = 2}
				# }
			}
		}
	}
	option = {
		name = EVTOPTC_SANDR.1041
		tooltip_info = stewardship
		trigger = {
			ROOT = {
				stewardship = 15
			}
		}

		character_event = {id = SANDR.1042 days = 5}
	}
}

character_event = {  #No Prof help success
	id = SANDR.1042
	desc = EVTDESC_SANDR.1042
	picture = GFX_evt_wanshi_desert
	border = GFX_event_normal_frame_diplomacy
	is_triggered_only = yes

	option = {
		name = 	EVTOPTA_SANDR.1042
		custom_tooltip = {
			text = test_run
			character_event = { id = SANDR.1044 days = 1 }
		}
	}
}

character_event = { #Prof help
	id = SANDR.1043
	desc = EVTDESC_SANDR.1043
	picture = GFX_evt_wanshi_desert
	border = GFX_event_normal_frame_diplomacy
	is_triggered_only = yes

	option = {
		name = 	EVTOPTA_SANDR.1043
		custom_tooltip = {
			text = test_run
			character_event = { id = SANDR.1044 days = 1 }
		}
	}
}

character_event = {  #Start of test run chain for wood/ gauntlet power decision
	id = SANDR.1044
	desc = EVTDESC_SANDR.1044
	picture = GFX_evt_wanshi_desert
	border = GFX_event_normal_frame_diplomacy
	is_triggered_only = yes

	desc = {
		trigger = {
			has_character_flag = running_gauntlet
		}
		text = gauntlet_intro_desc
	}

	immediate = {
		if = {
			limit = {
				has_quest = sand_quest_sailer
			}
			set_character_flag = wood_test_run
		}
		else_if = {
			limit = {
				NOT = { has_quest = sand_quest_sailer }
			}
			set_character_flag = running_gauntlet
		}
	}

	option = {
		name = EVTOPTA_SANDR.1044
		random_list = {
			25 = {
				set_character_flag = rock_canyon
				character_event = { id = SANDR.1045 days = 2 }
			}

			25 = {
				set_character_flag = sand_stretch
				character_event = { id = SANDR.1046 days = 2 }
			}

			25 = {
				set_character_flag = razor_rock_stretch
				character_event = { id = SANDR.1047 days = 2 }
			}
		}
	}
}

character_event = {  #Rock Canyon challenge
	id = SANDR.1045
	desc = EVTDESC_SANDR.1045
	picture = GFX_evt_wanshi_desert
	border = GFX_event_normal_frame_diplomacy
	is_triggered_only = yes

	trigger = {
		OR = {
			AND = {
				has_character_flag = wood_test_run
				has_character_flag = rock_canyon
				NOT = {has_character_flag = did_rock_canyon}
			}
			AND = {
				has_character_flag = running_gauntlet
				has_character_flag = rock_canyon
				NOT = {has_character_flag = did_rock_canyon}
			}
		}
	}
	option = { #High intensity manuevers
		name = EVTOPTA_SANDR.1045
		random_list = {
			50 = { #next stage
				modifier = {
					factor = 1.3
					has_character_flag = has_expensive_frame
				}
				modifier = {
					factor = 1.1
					has_character_flag = has_pricey_frame
				}
				modifier = {
					factor = 1.0
					martial = 12
				}
				modifier = {
					factor = 1.2
					trait = powerful_bender
				}
				modifier = {
					factor = 1.5
					trait = master_bender
				}
				modifier = {
					factor = 2.0
					trait = legendary_bender
				}
				hidden_tooltip = {
					random_list = {
						25 = {
							trigger = {
								NOT = { has_character_flag = did_rock_canyon }
							}
							character_event = {id = SANDR.1048 days = 2 }
						}
						25 = {
							trigger = {
								NOT = { has_character_flag = did_sand_stretch }
							}
							character_event = {id = SANDR.1048 days = 2 }
						}
						25 = {
							trigger = {
								NOT = { has_character_flag = did_razor_rock_stretch }
							}
							character_event = {id = SANDR.1048 days = 2 }
						}
						fallback = {
							character_event = { id = SANDR.1049 days = 3 }
						}
					}
					set_character_flag = did_rock_canyon
					clr_character_flag = rock_canyon
				}
			}
			50 = {
				modifier = {
					factor = 1.1
					has_character_flag = has_cheap_frame
				}
				modifier = {
					factor = 1.5
					martial < 5
				}
				character_event = {id = SANDR.1055 days = 1}
				if = {
					limit = {
						has_character_flag = running_gauntlet
					}
					character_event = { id = sand.13 days = 1 }
				}
			}
		}
		prestige = 10
	}
	option = { #low intensity manuevers
		name = EVTOPTB_SANDR.1045
		random_list = {
			65 = { #next stage
				modifier = {
					factor = 1.5
					has_character_flag = has_expensive_frame
				}
				modifier = {
					factor = 1.2
					has_character_flag = has_pricey_frame
				}
				modifier = {
					factor = 1.2
					martial = 12
				}
				# modifier = {
					# factor = 1.2
					# trait = powerful_bender
				# }
				# modifier = {
					# factor = 1.5
					# trait = master_bender
				# }
				# modifier = {
					# factor = 2.0
					# trait = legendary_bender
				# }
				hidden_tooltip = {
					random_list = {
						25 = {
							trigger = {
								NOT = { has_character_flag = did_rock_canyon }
							}
							character_event = {id = SANDR.1048 days = 2 }
						}
						25 = {
							trigger = {
								NOT = { has_character_flag = did_sand_stretch }
							}
							character_event = {id = SANDR.1048 days = 2 }
						}
						25 = {
							trigger = {
								NOT = { has_character_flag = did_razor_rock_stretch }
							}
							character_event = {id = SANDR.1048 days = 2 }
						}
						fallback = {
							character_event = { id = SANDR.1049 days = 3 }
						}
					}
					set_character_flag = did_rock_canyon
					clr_character_flag = rock_canyon
				}
			}
			# 35 = {
				# modifier = {
					# factor = 1.1
					# has_character_flag = has_cheap_frame
				# }
				# modifier = {
					# factor = 1.5
					# martial < 5
				# }
				# character_event = {id = SANDR.1055 days = 1}
			# }
		}
	}
}
character_event = { #Sand Stretch Challenge
	id = SANDR.1046
	desc = EVTDESC_SANDR.1046
	picture = GFX_evt_wanshi_desert
	border = GFX_event_normal_frame_diplomacy
	is_triggered_only = yes

	trigger = {
		OR = {
			AND = {
				has_character_flag = wood_test_run
				has_character_flag = sand_stretch
				NOT = {has_character_flag = did_sand_stretch}
			}
			AND = {
				has_character_flag = running_gauntlet
				has_character_flag = sand_stretch
				NOT = {has_character_flag = did_sand_stretch}
			}
		}
	}
	option = { #High Speed!
		name = EVTOPTA_SANDR.1046
		random_list = {
			50 = { #next stage
				modifier = {
					factor = 1.5
					has_character_flag = has_expensive_frame
				}
				modifier = {
					factor = 1.2
					has_character_flag = has_pricey_frame
				}
				modifier = {
					factor = 1.2
					martial = 12
				}
				modifier = {
					factor = 1.2
					trait = powerful_bender
				}
				modifier = {
					factor = 1.5
					trait = master_bender
				}
				modifier = {
					factor = 2.0
					trait = legendary_bender
				}
				hidden_tooltip = {
					random_list = {
						25 = {
							trigger = {
								NOT = { has_character_flag = did_rock_canyon }
							}
							character_event = {id = SANDR.1048 days = 2 }
						}
						25 = {
							trigger = {
								NOT = { has_character_flag = did_sand_stretch }
							}
							character_event = {id = SANDR.1048 days = 2 }
						}
						25 = {
							trigger = {
								NOT = { has_character_flag = did_razor_rock_stretch }
							}
							character_event = {id = SANDR.1048 days = 2 }
						}
						fallback = {
							character_event = { id = SANDR.1049 days = 3 }
						}
					}
					set_character_flag = did_sand_stretch
					clr_character_flag = sand_stretch
				}
			}
			50 = {
				modifier = {
					factor = 1.1
					has_character_flag = has_cheap_frame
				}
				modifier = {
					factor = 2.0
					martial < 5
				}
				character_event = {id = SANDR.1055 days = 1}
				if = {
					limit = {
						has_character_flag = running_gauntlet
					}
					character_event = { id = sand.13 days = 1 }
				}
			}
		}
		prestige = 10
	}
	option = { #Steady pace!
		name = EVTOPTB_SANDR.1046
		random_list = {
			65 = { #next stage
				modifier = {
					factor = 1.5
					has_character_flag = has_expensive_frame
				}
				modifier = {
					factor = 1.2
					has_character_flag = has_pricey_frame
				}
				modifier = {
					factor = 1.2
					martial = 12
				}
				# modifier = {
					# factor = 1.2
					# trait = powerful_bender
				# }
				# modifier = {
					# factor = 1.5
					# trait = master_bender
				# }
				# modifier = {
					# factor = 2.0
					# trait = legendary_bender
				# }
				hidden_tooltip = {
					random_list = {
						25 = {
							trigger = {
								NOT = { has_character_flag = did_rock_canyon }
							}
							character_event = {id = SANDR.1048 days = 2 }
						}
						25 = {
							trigger = {
								NOT = { has_character_flag = did_sand_stretch }
							}
							character_event = {id = SANDR.1048 days = 2 }
						}
						25 = {
							trigger = {
								NOT = { has_character_flag = did_razor_rock_stretch }
							}
							character_event = {id = SANDR.1048 days = 2 }
						}
						fallback = {
							character_event = { id = SANDR.1049 days = 3 }
						}
					}
					set_character_flag = did_sand_stretch
					clr_character_flag = sand_stretch
				}
			}
			# 35 = {
				# modifier = {
					# factor = 1.1
					# has_character_flag = has_cheap_frame
				# }
				# modifier = {
					# factor = 1.5
					# martial < 5
				# }
				# character_event = {id = SANDR.1055 days = 1}
			# }
		}
	}
}

character_event = { #Razor Rock Challenge
	id = SANDR.1047
	desc = EVTDESC_SANDR.1047
	picture = GFX_evt_wanshi_desert
	border = GFX_event_normal_frame_diplomacy
	is_triggered_only = yes

	trigger = {
		OR = {
			AND = {
				has_character_flag = wood_test_run
				has_character_flag = razor_rock_stretch
				NOT = {has_character_flag = did_razor_rock_stretch}
			}
			AND = {
				has_character_flag = running_gauntlet
				has_character_flag = razor_rock_stretch
				NOT = {has_character_flag = did_razor_rock_stretch}
			}
		}
	}
	option = { #Inside pass
		name = EVTOPTA_SANDR.1047
		random_list = {
			50 = { #next stage
				modifier = {
					factor = 1.5
					has_character_flag = has_expensive_frame
				}
				modifier = {
					factor = 1.2
					has_character_flag = has_pricey_frame
				}
				modifier = {
					factor = 1.2
					martial = 12
				}
				modifier = {
					factor = 1.2
					trait = powerful_bender
				}
				modifier = {
					factor = 1.5
					trait = master_bender
				}
				modifier = {
					factor = 2.0
					trait = legendary_bender
				}
				hidden_tooltip = {
					random_list = {
						25 = {
							trigger = {
								NOT = { has_character_flag = did_rock_canyon }
							}
							character_event = {id = SANDR.1048 days = 2 }
						}
						25 = {
							trigger = {
								NOT = { has_character_flag = did_sand_stretch }
							}
							character_event = {id = SANDR.1048 days = 2 }
						}
						25 = {
							trigger = {
								NOT = { has_character_flag = did_razor_rock_stretch }
							}
							character_event = {id = SANDR.1048 days = 2 }
						}
						fallback = {
							character_event = { id = SANDR.1049 days = 3 }
						}
					}
					set_character_flag = did_razor_rock_stretch
					clr_character_flag = razor_rock_stretch
				}
			}
			50 = {
				modifier = {
					factor = 1.5
					has_character_flag = has_cheap_frame
				}
				modifier = {
					factor = 2.0
					martial < 5
				}
				if = {
					limit = {
						NOT = { has_character_flag = running_gauntlet }
					}
					character_event = {id = SANDR.1055 days = 1 }
				}
				if = {
					limit = {
						has_character_flag = running_gauntlet
					}
					character_event = { id = sand.13 days = 1 }
				}
			}
		}
		prestige = 10
	}
	option = { #Outside route
		name = EVTOPTB_SANDR.1047
		random_list = {
			100 = { #next stage
				modifier = {
					factor = 1.5
					has_character_flag = has_expensive_frame
				}
				modifier = {
					factor = 1.2
					has_character_flag = has_pricey_frame
				}
				modifier = {
					factor = 1.2
					martial = 12
				}
				# modifier = {
					# factor = 1.2
					# trait = powerful_bender
				# }
				# modifier = {
					# factor = 1.5
					# trait = master_bender
				# }
				# modifier = {
					# factor = 2.0
					# trait = legendary_bender
				# }
				hidden_tooltip = {
					random_list = {
						25 = {
							trigger = {
								NOT = { has_character_flag = did_rock_canyon }
							}
							character_event = {id = SANDR.1048 days = 2 }
						}
						25 = {
							trigger = {
								NOT = { has_character_flag = did_sand_stretch }
							}
							character_event = {id = SANDR.1048 days = 2 }
						}
						25 = {
							trigger = {
								NOT = { has_character_flag = did_razor_rock_stretch }
							}
							character_event = {id = SANDR.1048 days = 2 }
						}
						fallback = {
							character_event = { id = SANDR.1049 days = 3 }
						}
					}
					set_character_flag = did_razor_rock_stretch
					clr_character_flag = razor_rock_stretch
				}
			}
			# 35 = {
				# modifier = {
					# factor = 1.1
					# has_character_flag = has_cheap_frame
				# }
				# modifier = {
					# factor = 1.5
					# martial < 5
				# }
				# character_event = {id = SANDR.1055 days = 1 }
			# }
		}
	}
}
character_event = { #Challenge completed segway event
	id = SANDR.1048
	picture = GFX_evt_wanshi_desert
	border = GFX_event_normal_frame_diplomacy
	is_triggered_only = yes

	desc = {
		trigger = {
			has_character_flag = did_rock_canyon
			OR = {
				has_character_flag = did_rock_canyon
				has_character_flag = did_sand_stretch
			}
			OR = {
				has_character_flag = did_rock_canyon
				has_character_flag = did_razor_rock_stretch
			}
			NOT = {
				AND = {
					has_character_flag = did_razor_rock_stretch
					has_character_flag = did_rock_canyon
					has_character_flag = did_sand_stretch
				}
			}
		}
		text = EVTDESC_CASE1_SANDR.1048
	}
	desc = {
		trigger = {
			has_character_flag = did_sand_stretch
			OR = {
				has_character_flag = did_sand_stretch
				has_character_flag = did_razor_rock_stretch
			}
			OR = {
				has_character_flag = did_sand_stretch
				has_character_flag = did_rock_canyon
			}
			NOT = {
				AND = {
					has_character_flag = did_razor_rock_stretch
					has_character_flag = did_rock_canyon
					has_character_flag = did_sand_stretch
				}
			}
		}
		text = EVTDESC_CASE2_SANDR.1048
	}
	desc = {
		trigger = {
			has_character_flag = did_razor_rock_stretch
			OR = {
				has_character_flag = did_razor_rock_stretch
				has_character_flag = did_rock_canyon
			}
			OR = {
				has_character_flag = did_razor_rock_stretch
				has_character_flag = did_sand_stretch
			}
			NOT = {
				AND = {
					has_character_flag = did_razor_rock_stretch
					has_character_flag = did_rock_canyon
					has_character_flag = did_sand_stretch
				}
			}
		}
		text = EVTDESC_CASE3_SANDR.1048
	}
	desc = {
		trigger = {
			AND = {
				has_character_flag = did_razor_rock_stretch
				has_character_flag = did_rock_canyon
				has_character_flag = did_sand_stretch
			}
		}
		text = EVTDESC_CASE4_SANDR.1048
	}

	option = {
		name = EVTOPTA_SANDR.1048
		name = {
			text = EVTOPTA_CASE1_SANDR.1048
			trigger = {
				AND = {
					has_character_flag = did_rock_canyon
					has_character_flag = did_sand_stretch
					has_character_flag = did_razor_rock_stretch
				}
				NOT = { has_character_flag = running_gauntlet }
			}
		}
		trigger = {
			ROOT = {
				OR = {
					has_character_flag = did_rock_canyon
					has_character_flag = did_sand_stretch
					has_character_flag = did_razor_rock_stretch
				}
				NOT = {
					ROOT = {
						AND = {
							has_character_flag = did_rock_canyon
							has_character_flag = did_sand_stretch
							has_character_flag = did_razor_rock_stretch
						}
					}
				}
			}
		}
		if = {
			limit = {
				OR = {
					has_character_flag = did_rock_canyon
					has_character_flag = did_sand_stretch
					has_character_flag = did_razor_rock_stretch
				}
			}
			random_list = {
				25 = {
					trigger = {
						NOT = { has_character_flag = did_rock_canyon }
					}
					set_character_flag = rock_canyon
					character_event = { id = SANDR.1045 }
				}
				25 = {
					trigger = {
						NOT = { has_character_flag = did_sand_stretch }
					}
					set_character_flag = sand_stretch
					character_event = { id = SANDR.1046 }
				}
				25 = {
					trigger = {
						NOT = { has_character_flag = did_razor_rock_stretch }
					}
					set_character_flag = razor_rock_stretch
					character_event = { id = SANDR.1047 }
				}
				fallback = {
					character_event = { id = SANDR.1049 }
				}
			}
		}
	}
	option = {
		name = EVTOPTB_SANDR.1048
		trigger = {
			AND = {
				has_character_flag = did_rock_canyon
				has_character_flag = did_sand_stretch
				has_character_flag = did_razor_rock_stretch
				has_character_flag = running_gauntlet
			}
			NOT = {has_character_flag = wood_test_run}
		}
		character_event = { id = SANDR.1049 }
	}
}

character_event = {  #fires after completing all challenges
	id = SANDR.1049
	picture = GFX_evt_wanshi_desert
	border = GFX_event_normal_frame_diplomacy
	is_triggered_only = yes

	desc = {
		trigger = {
			has_character_flag = running_gauntlet
		}
		text = finished_gauntlet
	}
	desc = {
		trigger = {
			NOT = {
				has_character_flag = running_gauntlet
			}
		}
		text = EVTDESC_SANDR.1049
	}
	trigger = {
		ROOT = {
			AND = {
				has_character_flag = did_rock_canyon
				has_character_flag = did_sand_stretch
				has_character_flag = did_razor_rock_stretch
			}
		}
	}
	option = {
		name = EVTOPTA_SANDR.1049
		trigger = {
			NOT = { has_character_flag = running_gauntlet }
		}
		clr_character_flag = did_rock_canyon
		clr_character_flag = did_sand_stretch
		clr_character_flag = did_razor_rock_stretch
		clr_character_flag = has_expensive_frame
		clr_character_flag = has_pricey_frame
		clr_character_flag = has_cheap_frame
		clr_character_flag = rock_canyon
		clr_character_flag = sand_stretch
		clr_character_flag = razor_rock_stretch
		clr_character_flag = wood_test_run
		character_event = { id = SANDR.1011 days = 3 }
		prestige = 10
	}
	option = {
		name = EVTOPTB_SANDR.1049
		trigger = {
			has_character_flag = running_gauntlet
		}
		clr_character_flag = did_rock_canyon
		clr_character_flag = did_sand_stretch
		clr_character_flag = did_razor_rock_stretch
		clr_character_flag = has_expensive_frame
		clr_character_flag = rock_canyon
		clr_character_flag = sand_stretch
		clr_character_flag = razor_rock_stretch
		clr_character_flag = wood_test_run
		character_event = { id = sand.12 days = 5 random = 10 }
	}
}

character_event = {  #character goes to local village
	id = SANDR.1054
	desc = EVTDESC_SANDR.1054
	picture = GFX_evt_market_byzantine
	border = GFX_event_normal_frame_diplomacy
	is_triggered_only = yes

	trigger = {
	}

	option = { #moderate frame
		name = EVTOPTA_SANDR.1054
		wealth = -30
		random_realm_character = {
			opinion = {
				modifier = opinion_lord_bought_item_average
				who = ROOT
			}
		}
		random_realm_province = {
			add_province_modifier = {
				modifier = lord_visted_local_market
				months = 3
			}
		}
		set_character_flag = has_pricey_frame
		character_event = { id = SANDR.1041 days = 1 }
	}
	option = {
		name = EVTOPTB_SANDR.1054
		wealth = -10
		random_realm_character = {
			opinion = {
				modifier = opinion_lord_bought_item_trash
				who = ROOT
			}
		}
		random_realm_province = {
			add_province_modifier = {
				modifier = lord_visted_local_market
				months = 3
			}
		}
		set_character_flag = has_cheap_frame
		character_event = { id = SANDR.1041 days = 1 }
	}
	option = { #easter egg option shows if up char is flagged with "marked_for_pai_sho"
		name = EVTOPTC_SANDR.1054
		trigger = {
			has_character_flag = marked_for_pai_sho
			NOT = { has_character_flag = bought_pai_sho_piece }
		}
		custom_tooltip = {
			text = pai_sho?
			wealth = -2
			random_realm_character = {
				opinion = {
					modifier = opinion_lord_bought_item_trash
					who = ROOT
				}
			}
			set_character_flag = bought_pai_sho_piece
			character_event = { id = SANDR.1054 days = 1 }
		}
	}
}
character_event = { #Challenge failure event
	id = SANDR.1055
	desc = EVTDESC_SANDR.1055
	picture = GFX_evt_wanshi_desert
	border = GFX_event_normal_frame_diplomacy
	is_triggered_only = yes

	trigger = {
	}

	immediate = {
		clr_character_flag = did_rock_canyon
		clr_character_flag = did_sand_stretch
		clr_character_flag = did_razor_rock_stretch
		clr_character_flag = has_expensive_frame
		clr_character_flag = has_pricey_frame
		clr_character_flag = has_cheap_frame
		clr_character_flag = rock_canyon
		clr_character_flag = sand_stretch
		clr_character_flag = razor_rock_stretch
		clr_character_flag = wood_test_run
	}
	option = {
		name = EVTOPTA_SANDR.1055
		character_event = { id = SANDR.1135 days = 4 }
	}
}

character_event = {  #start of rope rigging quest chain
	id = SANDR.1056
	desc = EVTDESC_SANDR.1056
	picture = GFX_evt_wanshi_desert
	border = GFX_event_normal_frame_diplomacy
	is_triggered_only = yes

	trigger = {
		has_character_flag = ROPE
	}
	option = {  #track down trade caravan
		name = EVTOPTA_SANDR.1056
		character_event = { id = SANDR.1057 days = 15 }
	}
}

character_event = {
	id = SANDR.1057
	desc = EVTDESC_SANDR.1057
	picture = GFX_evt_wanshi_desert
	border = GFX_event_normal_frame_diplomacy
	is_triggered_only = yes

	# trigger = {
	# }
	option = {
		name = EVTOPTA_SANDR.1057
		hidden_tooltip = {
			random_list = {
				75 = {
					character_event = { id = SANDR.1058 days = 5 }
				}
				25 = {
					character_event = { id = SANDR.1070 days = 5 }
				}
			}
		}
	}
}

character_event = { #character finds in tact caravan, can buy rope then and there or ride along and get it for free.
	id = SANDR.1058
	desc = EVTDESC_SANDR.1058
	picture = GFX_evt_wanshi_desert
	border = GFX_event_normal_frame_diplomacy
	is_triggered_only = yes

	trigger = {
	}

	option = {
		name = EVTOPTA_SANDR.1058
		character_event = {id = SANDR.1059 days = 1 }
	}
	option = {
		name = EVTOPTB_SANDR.1058
		character_event = { id = SANDR.1061 days = 1 }
	}
}

character_event = { #character rejects offer, buys rope
	id = SANDR.1059
	desc = EVTDESC_SANDR.1059
	picture = GFX_evt_wanshi_desert
	border = GFX_event_normal_frame_diplomacy
	is_triggered_only = yes

	option = {
		name = EVTOPTA_SANDR.1059
		wealth = -20
		character_event = { id = SANDR.1060 days = 2 }
	}
	option = {  #change your mind option
		name = EVTOPTB_SANDR.1059
		character_event = { id = SANDR.1058 days = 1 }
	}
}

character_event = {
	id = SANDR.1060
	desc = EVTDESC_SANDR.1060
	picture = GFX_evt_wanshi_desert
	border = GFX_event_normal_frame_diplomacy
	is_triggered_only = yes

	option = {
		name = EVTOPTA_SANDR.1060
		character_event = {id = SANDR.1011 days = 4 }
	}
}

character_event = {  #character tags along
	id = SANDR.1061
	desc = EVTDESC_SANDR.1061
	picture = GFX_evt_wanshi_desert
	border = GFX_event_normal_frame_war
	is_triggered_only = yes

	immediate = {
		random_list = {
			75 = { set_character_flag = caravan_safe }
			25 = { set_character_flag = caravan_attacked }
		}
	}
	option = {
		name = EVTOPTA_SANDR.1061
		character_event = { id = SANDR.1062 days = 2 }
		wealth = 25
	}
}

character_event = { #switchboard event
	id = SANDR.1062
	is_triggered_only = yes
	hide_window = yes

	immediate = {
		if = {
			limit = {
				has_character_flag = caravan_safe
			}
			character_event = { id = SANDR.1063 days = 15 }
		}
		if = {
			limit = {
				has_character_flag = caravan_attacked
			}
			character_event = { id = SANDR.1064 days = 5 }
		}
	}
}

character_event = {
	id = SANDR.1063
	desc = EVTDESC_SANDR.1063
	picture = GFX_evt_wanshi_desert
	is_triggered_only = yes

	option = {
		name = EVTOPTA_SANDR.1063
		character_event = { id = SANDR.1011 days = 2 }
	}
}
character_event = { #thug charges
	id = SANDR.1064
	desc = EVTDESC_SANDR.1064
	picture = GFX_evt_wanshi_desert
	border = GFX_event_normal_frame_war
	is_triggered_only = yes

	option = { #attack
		name = EVTOPTA_SANDR.1064
		random_list = {
			65 = {
				modifier = {
					factor = 2.0
					martial > 15
				}
				modifier = {
					factor = 1.2
					combat_rating >= 10
				}
				modifier = {
					factor = 1.2
					trait = powerful_bender
				}
				modifier = {
					factor = 1.5
					trait = master_bender
				}
				modifier = {
					factor = 4.0
					trait = legendary_bender
				}
				random_character = {
					limit = {
						culture = sandbender_culture
						trait = sandbender
						is_adult = yes
						is_landed = no
						is_in_society = no
						is_councillor = no
					}
					death = {
						death_reason = death_battle
						killer = ROOT
					}
				}
				character_event = { id = SANDR.1068 days = 1 }
			}
			35 = {  #you get beat up
				modifier = {
					factor = 1.5
					combat_rating <= 10
				}
				ROOT = {
					character_event = { id = SANDR.1067 }
					add_trait = wounded
				}
			}
		}
	}
	option = {  #special option
		name = EVTOPTB_SANDR.1064
		tooltip_info = combat_rating
		trigger = {
			combat_rating > 55
		}
		random_character = {
			limit = {
				culture = sandbender_culture
				trait = sandbender
				is_adult = yes
				is_landed = no
				is_in_society = no
				is_councillor = no
				martial < 10
				combat_rating < 10
			}
			death = {
				death_reason = death_battle
				killer = ROOT
			}
		}
		character_event = { id = SANDR.1068 }
	}
	option = { #wait for opening
		name = EVTOPTC_SANDR.1064
		set_character_flag = waited
		random_list = {
			50 = { #thug hurts player
				character_event = { id = SANDR.1065 }
			}
			50 = { #thug misses
				character_event = { id = SANDR.1066 }
			}
		}
	}
}

character_event = {
	id = SANDR.1065
	desc = EVTDESC_SANDR.1065
	picture = GFX_evt_wanshi_desert
	border = GFX_event_normal_frame_war
	is_triggered_only = yes

	# trigger = {
		# has_character_flag = waited
	# }

	option = {
		name = EVTOPTA_SANDR.1065
		random_list = {
			75 = {
				modifier = {
					factor = 2.0
					martial > 15
				}
				modifier = {
					factor = 1.2
					combat_rating >= 10
				}
				modifier = {
					factor = 1.2
					trait = powerful_bender
				}
				modifier = {
					factor = 1.5
					trait = master_bender
				}
				modifier = {
					factor = 4.0
					trait = legendary_bender
				}
				modifier = {
					factor = 2.5
					has_character_flag = waited
				}
				random_character = {
					limit = {
						culture = sandbender_culture
						trait = sandbender
						is_adult = yes
						is_landed = no
						is_in_society = no
						is_councillor = no
					}
					death = {
						death_reason = death_battle
						killer = ROOT
					}
				}
				character_event = { id = SANDR.1068 days = 1 }
			}
			25 = {  #you get beat up
				modifier = {
					factor = 2.0
					combat_rating <= 10
				}
				ROOT = {
					character_event = { id = SANDR.1067 }
					add_trait = wounded
				}
			}
		}
	}
}

character_event = {
	id = SANDR.1066
	desc = EVTDESC_SANDR.1066
	picture = GFX_evt_wanshi_desert
	border = GFX_event_normal_frame_war
	is_triggered_only = yes

	# trigger = {
		# has_character_flag = waited
	# }

	option = {
		name = EVTOPTA_SANDR.1066
		random_list = {
			75 = {
				modifier = {
					factor = 2.0
					martial > 15
				}
				modifier = {
					factor = 1.2
					combat_rating >= 10
				}
				modifier = {
					factor = 1.2
					trait = powerful_bender
				}
				modifier = {
					factor = 1.5
					trait = master_bender
				}
				modifier = {
					factor = 4.0
					trait = legendary_bender
				}
				modifier = {
					factor = 2.5
					has_character_flag = waited
				}
				random_character = {
					limit = {
						culture = sandbender_culture
						trait = sandbender
						is_adult = yes
						is_landed = no
						is_in_society = no
						is_councillor = no
					}
					death = {
						death_reason = death_battle
						killer = ROOT
					}
				}
				character_event = { id = SANDR.1068 days = 1 }
			}
			25 = {  #you get beat up
				modifier = {
					factor = 2.0
					combat_rating <= 10
				}
				ROOT = {
					character_event = { id = SANDR.1067 }
					add_trait = wounded
				}
			}
		}
	}
}

character_event = {  #character is saved by a caravan member
	id = SANDR.1067
	desc = EVTDESC_SANDR.1067
	picture = GFX_evt_wanshi_desert
	is_triggered_only = yes

	option = {
		name = EVTOPTA_SANDR.1067
		random_character = {
			limit = {
				culture = sandbender_culture
				trait = sandbender
				is_adult = yes
				is_landed = no
				is_in_society = no
				is_councillor = no
			}
			ROOT = {
				opinion = {
					modifier = saved_on_battlefield
					who = PREV
				}
			}
		}
		character_event = { id = SANDR.1069 days = 1 }
		prestige = 10
		change_martial = 1
	}
}

character_event = { #aftermath
	id = SANDR.1068
	desc = EVTDESC_SANDR.1068
	picture = GFX_evt_wanshi_desert
	is_triggered_only = yes

	option = {
		name = EVTOPTA_SANDR.1068
		prestige = 15
		change_martial = 1
		character_event = { id = SANDR.1069 days = 5 }
	}
	option = {
		name = EVTOPTB_SANDR.1068
		random = {
			chance = 30
			add_trait = wroth
		}
		prestige = 15
		change_martial = 2
		character_event = { id = SANDR.1069 days = 5 }
	}
}
character_event = { #end of chain
	id = SANDR.1069
	desc = EVTDESC_SANDR.1069
	picture = GFX_evt_wanshi_desert
	is_triggered_only = yes

	immediate = {
		clr_character_flag = caravan_safe
		clr_character_flag = caravan_attacked
		clr_character_flag = waited
	}

	option = {
		name = EVTOPTA_SANDR.1069
		character_event = { id = SANDR.1011 days = 2 }
		wealth = 10
	}
}

character_event = { #character searches for caravan
	id = SANDR.1070
	desc = EVTDESC_SANDR.1070
	picture = GFX_evt_wanshi_desert
	is_triggered_only = yes

	option = {
		name = EVTOPTA_SANDR.1070
		character_event = { id = SANDR.1071 days = 6 }
	}
}
character_event = { #character sees something on the horizon
	id = SANDR.1071
	desc = EVTDESC_SANDR.1071
	picture = GFX_evt_wanshi_desert
	is_triggered_only = yes

	option = {
		name = EVTOPTA_SANDR.1071
		character_event = { id = SANDR.1072 days = 1 }
	}
}
character_event = { #character finds wrecked caravan with some rope left behind
	id = SANDR.1072
	desc = EVTDESC_SANDR.1072
	picture = GFX_evt_wanshi_desert
	is_triggered_only = yes

	option = {
		name = EVTOPTA_SANDR.1072
		random = {
			chance = 30
			modifier = {
				factor = 2.0
				trait = craven
			}
			add_trait = depressed
		}
		character_event = { id = SANDR.1011 days = 2 }
	}
	option = {
		name = EVTOPTB_SANDR.1072
		random = {
			chance = 25
			add_trait = stressed
		}
		character_event = { id = SANDR.1011 days = 2 }
	}
}

character_event = {  #start of sail chain
	id = SANDR.1076
	desc = EVTDESC_SANDR.1076
	picture = GFX_evt_wanshi_desert
	is_triggered_only = yes
	hide_new = yes


	option = {
		name = EVTOPTA_SANDR.1076
		character_event = { id = SANDR.1177 days = 1 }
	}
}

character_event = {  #sail chain decision hub
	id = SANDR.1177
	desc = EVTDESC_SANDR.1177
	picture = GFX_evt_wanshi_desert
	is_triggered_only = yes
	hide_new = yes


	option = {  #go to misty palms
		name = EVTOPTA_SANDR.1177
		character_event = { id = SANDR.1037 days = 6 }
	}
	option = {  #search for a sail maker
		name = EVTOPTB_SANDR.1177
		character_event = { id = SANDR.1181 days = 2 }
	}
}

character_event = {
	id = SANDR.1178
	desc = EVTDESC_SANDR.1178
	picture = GFX_evt_wanshi_desert
	is_triggered_only = yes

	option = { #purchase a sail
		name = EVTOPTA_SANDR.1178
		character_event = { id = SANDR.1179 days = 1 }
		wealth = -10
	}
}

character_event = {
	id = SANDR.1179
	desc = EVTDESC_SANDR.1179
	picture = GFX_evt_wanshi_desert
	is_triggered_only = yes

	option = {
		name = EVTOPTA_SANDR.1179
		character_event = { id = SANDR.1180 }
		set_character_flag = gave_money
		wealth = -1
	}
	option = {
		name = EVTOPTB_SANDR.1179
		character_event = { id = SANDR.1180 }
		set_character_flag = refused
	}
}

character_event = {
	id = SANDR.1180
	picture = GFX_evt_wanshi_desert
	is_triggered_only = yes

	desc = {
		trigger = {
			has_character_flag = gave_money
			NOT = { has_character_flag = refused }
		}
		text = EVTDESCCASE1_SANDR.1180
	}
	desc = {
		trigger = {
			has_character_flag = refused
			NOT = { has_character_flag = gave_money }
		}
		text = EVTDESCCASE2_SANDR.1180
	}
	option = {
		name = {
			text = EVTOPTACASE1_SANDR.1180
			trigger = {
				has_character_flag = gave_money
			}
		}
		name = {
			text = EVTOPTACASE2_SANDR.1180
			trigger = {
				has_character_flag = refused
			}
		}
		if = {
			limit = {
				has_character_flag = gave_money
			}
			prestige = 3
		}
		clr_character_flag = gave_money
		clr_character_flag = refused
		character_event = { id = SANDR.1011 days = 3 }
	}
}

character_event = {
	id = SANDR.1181
	desc = EVTDESC_SANDR.1181
	picture = GFX_evt_wanshi_desert
	is_triggered_only = yes

	option = {
		name = EVTOPTA_SANDR.1181
		custom_tooltip = {
			text = search_for_sail
			character_event = { id = SANDR.1182 days = 14 random = 25 }
		}
	}
}

character_event = {
	id = SANDR.1182
	desc = EVTDESC_SANDR.1182
	picture = GFX_evt_wanshi_desert
	is_triggered_only = yes

	immediate = {
		hidden_effect = {
			create_character = {
				age = 45
				female = yes
				dynasty = none
				attributes = {
					stewardship = 3
				}
			}
			new_character = {
				save_event_target_as = sail_maker
				set_character_flag = ai_flag_refuse_marriage
				set_character_flag = ai_flag_refuse_concubinage
				set_character_flag = cannot_marry
				set_character_flag = no_court_invites
				will_not_marry_effect = yes
			}

			event_target:sail_maker = {
				random_list = { #Stewardship
					15 = { change_stewardship = 1 }
					25 = { change_stewardship = 3 }
					20 = {
						artisan_craftsmen_bloodline_increase_score = yes
						change_stewardship = 5
					}
					10 = {
						artisan_craftsmen_bloodline_increase_score = yes
						change_stewardship = 7
					}
				}
				random_list = { #Personality
					1 = { add_trait = greedy }
					1 = { add_trait = envious }
					1 = {
						artisan_craftsmen_bloodline_increase_score = yes
						add_trait = charitable
					}
					1 = {
						artisan_craftsmen_bloodline_increase_score = yes
						add_trait = diligent
					}
					1 = { add_trait = deceitful }
				}
			}
		}
	}

	option = {
		name = EVTOPTA_SANDR.1182
		custom_tooltip = { text = HIRE }
		hidden_effect = {
			save_event_target_as = sail_maker_employer
			event_target:sail_maker = {
				character_event = { id = SANDR.1183 }
			}
		}
	}
	option = {
		name = EVTOPTB_SANDR.1183
		custom_tooltip = { text = DECLINE_SAIL_MAKER }
		hidden_effect = {
			event_target:sail_maker = {
				leave_court_and_die_effect = yes
			}
			character_event = { id = SANDR.1177 days = 1 }
		}
	}
}

character_event = {  #sail maker ping event
	id = SANDR.1183
	hide_window = yes
	is_triggered_only = yes

	immediate = {
		event_target:sail_maker_employer = {
			character_event = { id = SANDR.1184 }
		}
	}
}

character_event = {
	id = SANDR.1184
	desc = EVTDESC_SANDR.1184
	picture = GFX_evt_emissary
	border = GFX_event_normal_frame_economy
	is_triggered_only = yes

	option = {  #high quality sail
		name = EVTOPTA_SANDR.1184
		wealth = -150
			hidden_effect = {
				event_target:sail_maker = {
					set_character_flag = expensive_sail
				}
				set_character_flag = expensive_sail
				random_list = {
					60 = { #Success
						modifier = { factor = 0.7 FROM = { stewardship <= 2 } }
						modifier = { factor = 0.7 FROM = { stewardship <= 4 } }
						modifier = { factor = 0.7 FROM = { stewardship <= 6 } }
						modifier = { factor = 0.7 FROM = { stewardship <= 8 } }
						modifier = { factor = 0.7 FROM = { stewardship <= 10 } }
						modifier = { factor = 1.1 FROM = { stewardship >= 10 } }
						modifier = { factor = 1.1 FROM = { stewardship >= 12 } }
						modifier = { factor = 1.1 FROM = { stewardship >= 14 } }
						modifier = { factor = 1.1 FROM = { stewardship >= 16 } }
						modifier = { factor = 1.1 FROM = { stewardship >= 18 } }
						modifier = { factor = 1.1 FROM = { stewardship >= 20 } }
						modifier = { factor = 1.3 FROM = { trait = greedy } }
						modifier = { factor = 1.3 FROM = { trait = diligent } }
						modifier = { factor = 1.3 FROM = { trait = patient } }
						modifier = { factor = 1.3 FROM = { is_smart_trigger = yes } }
						set_character_flag = sail_maker_success
					}
					40 = { #Fail
						set_character_flag = sail_maker_failure
					}
				}
				character_event = { id = SANDR.1186 days = 50 random = 100 }
			}
		ai_chance = {
			factor = 35
			modifier = {
				OR = {
					tier = KING
					tier = DUKE
				}
				factor = 3
			}
			modifier = {
				NOR = {
					wealth = 200
					yearly_income = 50
				}
				factor = 0
			}
		}
	}
	option = {  #moderate sail
		name = EVTOPTB_SANDR.1184
		wealth = -50
		hidden_effect = {
				event_target:sail_maker = {
					set_character_flag = moderate_sail
				}
				set_character_flag = moderate_sail
				random_list = {
					70 = { #Success
						modifier = { factor = 0.7 FROM = { stewardship <= 2 } }
						modifier = { factor = 0.7 FROM = { stewardship <= 4 } }
						modifier = { factor = 0.7 FROM = { stewardship <= 6 } }
						modifier = { factor = 0.7 FROM = { stewardship <= 8 } }
						modifier = { factor = 0.7 FROM = { stewardship <= 10 } }
						modifier = { factor = 1.1 FROM = { stewardship >= 10 } }
						modifier = { factor = 1.1 FROM = { stewardship >= 12 } }
						modifier = { factor = 1.1 FROM = { stewardship >= 14 } }
						modifier = { factor = 1.1 FROM = { stewardship >= 16 } }
						modifier = { factor = 1.1 FROM = { stewardship >= 18 } }
						modifier = { factor = 1.1 FROM = { stewardship >= 20 } }
						modifier = { factor = 1.3 FROM = { trait = greedy } }
						modifier = { factor = 1.3 FROM = { trait = diligent } }
						modifier = { factor = 1.3 FROM = { trait = patient } }
						modifier = { factor = 1.3 FROM = { is_smart_trigger = yes } }
						set_character_flag = sail_maker_success
					}
					30 = { #Fail
						set_character_flag = sail_maker_failure
					}
				}
				character_event = { id = SANDR.1186 days = 50 random = 100 }
		}
		ai_chance = {
			factor = 35
			modifier = {
				OR = {
					tier = KING
					tier = DUKE
				}
				factor = 3
			}
			modifier = {
				NOR = {
					wealth = 200
					yearly_income = 50
				}
				factor = 0
			}
		}
	}
	option = { #cheap
		name = EVTOPTC_SANDR.1184
		wealth = -30
		event_target:sail_maker = { set_character_flag = cheap_sail }
		set_character_flag = cheap_sail
		set_character_flag = sail_maker_success
		character_event = { id = SANDR.1186 days = 50 random = 100 }
	}
}

character_event = { #success ping event
	id = SANDR.1185
	hide_window = yes
	is_triggered_only = yes

	immediate = {
		if = {
			limit = { NOT = { event_target:sail_maker_employer = { is_alive = yes } } }
			liege = { save_event_target_as = sail_maker_employer }
		}

		trigger_switch = {
			on_trigger = has_character_flag
			expensive_sail		={event_target:sail_maker_employer = {character_event = { id = SANDR.1189}}}
			moderate_sail		={event_target:sail_maker_employer = {character_event = { id = SANDR.1190}}}
			cheap_sail			={event_target:sail_maker_employer = {character_event = { id = SANDR.1191}}}
		}
	}
}

character_event = { #checks to see if sail maker is still alive
	id = SANDR.1186
	hide_window = yes

	is_triggered_only = yes

	trigger = {
		event_target:sail_maker = { is_alive = yes }
	}

	fail_trigger_effect = { character_event = { id = SANDR.1187} }

	immediate = {
		trigger_switch = {
			on_trigger = has_character_flag
			sail_maker_success = { event_target:sail_maker_employer = { character_event = { id = SANDR.1185 } } }
			sail_maker_failure = { event_target:sail_maker_employer = { character_event = { id = SANDR.1188 } } }

		}
		clr_character_flag = sail_maker_success
		clr_character_flag = sail_maker_failure
	}
}

character_event = {  #if sail maker is dead, quest ends as a success still, money is returned by kin of sail maker
	id = SANDR.1187
	desc = EVTDESC_SANDR.1187
	picture = GFX_evt_wanshi_desert
	hide_from = yes
	is_triggered_only = yes

	option = {
		name = EVTOPTA_SANDR.1187
		trigger = {
			has_character_flag = expensive_sail
		}
		wealth = 150
	}
	option = {
		name = EVTOPTB_SANDR.1187
		trigger = {
			has_character_flag = moderate_sail
		}
		wealth = 50
	}
	option = {
		name = EVTOPTC_SANDR.1187
		trigger = {
			has_character_flag = cheap_sail
		}
		wealth = 30
	}
	after = {
		clr_character_flag = expensive_sail
		clr_character_flag = moderate_sail
		clr_character_flag = cheap_sail
		clr_character_flag = sail_maker_success
		clr_character_flag = sail_maker_failure
		set_character_flag = maker_died
		character_event = { id = SANDR.1011 days = 3 }
	}
}

character_event = { # sail maker fails because she's dumb
	id = SANDR.1188
	desc = EVTDESC_SANDR.1188
	picture = GFX_evt_wanshi_desert
	is_triggered_only = yes

	option = {
		name = EVTOPTA_SANDR.1188
		character_event = { id = SANDR.1135 days = 5 random = 10 }
	}
	after = {
		clr_character_flag = expensive_sail
		clr_character_flag = moderate_sail
		clr_character_flag = cheap_sail
		clr_character_flag = sail_maker_success
		clr_character_flag = sail_maker_failure
		hidden_effect = {
			event_target:sail_maker = {leave_court_and_die_effect = yes}
		}
	}
}

character_event = { #expensive sail complete
	id = SANDR.1189
	desc = EVTDESC_SANDR.1189
	picture = GFX_evt_wanshi_desert
	is_triggered_only = yes

	option = {
		name = EVTOPTA_SANDR.1189
		character_event = { id = SANDR.1011 days = 1 }
		prestige = 20
	}
	after = {
		hidden_effect = {
			event_target:sail_maker = {leave_court_and_die_effect = yes}
			clr_character_flag = expensive_sail
			clr_character_flag = moderate_sail
			clr_character_flag = cheap_sail
			clr_character_flag = sail_maker_success
			clr_character_flag = sail_maker_failure
		}
	}
}

character_event = { #moderate sail complete
	id = SANDR.1190
	desc = EVTDESC_SANDR.1190
	picture = GFX_evt_wanshi_desert
	is_triggered_only = yes

	option = {
		name = EVTOPTA_SANDR.1190
		character_event = { id = SANDR.1011 days = 1 }
		prestige = 5
	}
	after = {
		hidden_effect = {
			event_target:sail_maker = {leave_court_and_die_effect = yes}
			clr_character_flag = expensive_sail
			clr_character_flag = moderate_sail
			clr_character_flag = cheap_sail
			clr_character_flag = sail_maker_success
			clr_character_flag = sail_maker_failure
		}
	}
}

character_event = { #cheap sail complete
	id = SANDR.1191
	desc = EVTDESC_SANDR.1191
	picture = GFX_evt_wanshi_desert
	is_triggered_only = yes

	option = {
		name = EVTOPTA_SANDR.1191
		character_event = { id = SANDR.1011 days = 1 }
	}
	after = {
		hidden_effect = {
			event_target:sail_maker = {leave_court_and_die_effect = yes}
			clr_character_flag = expensive_sail
			clr_character_flag = moderate_sail
			clr_character_flag = cheap_sail
			clr_character_flag = sail_maker_success
			clr_character_flag = sail_maker_failure
		}
	}
}

###########################COMPASS QUEST LINE BULLSHIT###########################

character_event = {
	id = SANDR.1192
	desc = EVTDESC_SANDR.1192
	picture = GFX_evt_wanshi_desert
	is_triggered_only = yes

	option = {
		name = EVTOPTA_SANDR.1192
		long_character_event = { id = SANDR.1193 days = 1 }
	}
}

long_character_event = {
	id = SANDR.1193
	desc = EVTDESC_SANDR.1193
	picture = GFX_evt_wanshi_desert
	is_triggered_only = yes

	option = {  #seek the retired racer
		name = EVTOPTB_SANDR.1193
		long_character_event = { id = SANDR.1194 days = 1 }
	}
}

long_character_event = {
	id = SANDR.1194
	desc = EVTDESC_SANDR.1194
	picture = GFX_evt_wanshi_desert
	is_triggered_only = yes

	option = {
		name = EVTOPTA_SANDR.1194
		random_courtier = {
			character_event = { id = SANDR.1195 days = 1 }
		}
	}
}

character_event = {
	id = SANDR.1195
	is_triggered_only = yes
	hide_window = yes

	immediate = {
		FROM = {
			character_event = { id = SANDR.1196 days = 2 }
		}
	}
}

character_event = {
	id = SANDR.1196
	desc = EVTDESC_SANDR.1196
	picture = GFX_evt_wanshi_desert
	is_triggered_only = yes
	hide_from = yes

	option = {
		name = EVTOPTA_SANDR.1196
		character_event = { id = SANDR.1197 days = 20 random = 30 }
	}
}

character_event = {
	id = SANDR.1197
	desc = EVTDESC_SANDR.1197
	picture = GFX_evt_wanshi_desert
	is_triggered_only = yes
	hide_from = yes
	option = {
		name = EVTOPTA_SANDR.1197
		character_event = { id = SANDR.1198 days = 10 random = 15 }
	}
}

character_event = {
	id = SANDR.1198
	desc = EVTDESC_SANDR.1198
	picture = GFX_evt_moonlit_mountains_hf
	is_triggered_only = yes

	option = {
		name = EVTOPTA_SANDR.1198
		custom_tooltip = {
			text = PRESS_ON
			long_character_event = { id = SANDR.1199 days = 5 }
		}
	}
}

long_character_event = {
	id = SANDR.1199
	desc = EVTDESC_SANDR.1199
	is_triggered_only = yes
	picture = GFX_evt_wanshi_desert

	desc = {
		trigger = {
			has_character_flag = attempted_compass
		}
		text = EVTDESC_CASE2_SAND.1199
	}
	option = {
		name = EVTOPTA_SANDR.1199
		add_trait = stressed
		character_event = { id = SANDR.1120 }
	}
}

character_event = {
	id = SANDR.1120
	desc = EVTDESC_SANDR.1120
	picture = GFX_evt_wanshi_desert
	is_triggered_only = yes
	title = THE_SANDSTORM

	option = {  #try to outrun
		name = EVTOPTA_SANDR.1120
		hidden_effect = {
			random_list = {
				75 = {
					character_event = { id = SANDR.1121 days = 1 }  #you make it through the sandstorm and continue to the village
				}
				25 = {
					character_event = { id = SANDR.1126 days = 1 }  #you lose yourself in the sandstorm and are lost
					modifier = {
						factor = 1.5
						martial < 10
					}
				}
			}
		}
	}
	option = { #bunker down
		name = EVTOPTB_SANDR.1120
		character_event = { id = SANDR.1127 days = 4 }
	}
	option = {  #you're a coward so you lay on the desert floor and hope for the best
		name = EVTOPTC_SANDR.1120
		trigger = {
			trait = craven
		}
		custom_tooltip = {
			text = CRAVEN_TT
			character_event = { id = SANDR.1125 days = 1 }
		}
	}
}

character_event = {
	id = SANDR.1121
	desc = EVTDESC_SANDR.1121
	picture = GFX_evt_wanshi_desert
	is_triggered_only = yes
	title = THE_SANDSTORM

	option = {
		name = EVTOPTA_SANDR.1121
		long_character_event = { id = SANDR.1122 days = 4 }
		set_character_flag = outran_sandstorm
	}
}

long_character_event = {
	id = SANDR.1122
	picture = GFX_evt_wanshi_desert
	is_triggered_only = yes
	title = THE_SANDSTORM

	desc = {
		trigger = {
			has_character_flag = outran_sandstorm
		}
		text = EVTDESC_CASE1_SANDR.1122
	}
	desc = {
		trigger = {
			has_character_flag = found_shelter
		}
		text = EVTDESC_CASE2_SANDR.1122
	}
	option = {
		name = EVTOPTA_SANDR.1122
		hidden_effect = {
			create_character = {
				name = "Sotan"
				age = 65
				female = no
				dynasty = none
				attributes = {
					stewardship = 3
				}
				trait = sand_racer_legend
			}
			new_character = {
				save_event_target_as = retired_racer
			}
			event_target:retired_racer = {
				character_event = { id = SANDR.1123 }
			}
		}
	}
}
character_event = {
	id = SANDR.1123
	hide_window = yes
	is_triggered_only = yes

	immediate = {
		FROM = {
			long_character_event = { id = SANDR.1124 }
		}
	}
}
long_character_event = {  #you meet the retired racer
	id = SANDR.1124
	title = EVTTITLE_SANDR.1124
	desc = EVTDESC_SANDR.1124
	picture = GFX_evt_wanshi_desert
	is_triggered_only = yes

	option = {
		name = EVTOPTA_SANDR.1124
		long_character_event = { id = SANDR.1128 }
	}
}
character_event = {
	id = SANDR.1125
	desc = EVTDESC_SANDR.1125
	picture = GFX_evt_wanshi_desert
	is_triggered_only = yes
	title = THE_SANDSTORM

	option = {
		name = EVTOPTA_SANDR.1125
		custom_tooltip = {
			text = CRAVEN2_TT
			add_trait = wounded
			character_event = { id = SANDR.1135 days = 1 }
			set_character_flag = attempted_compass
		}
	}
}

character_event = {
	id = SANDR.1126
	desc = EVTDESC_SANDR.1126
	picture = GFX_evt_wanshi_desert
	is_triggered_only = yes
	title = THE_SANDSTORM

	option = {
		name = EVTOPTA_SANDR.1126
		custom_tooltip = {
			text = compass_failure
			prestige = -3
			character_event = { id = SANDR.1135 days = 5 }
			set_character_flag = attempted_compass
		}
	}
}

character_event = {  #shelter
	id = SANDR.1127
	desc = EVTDESC_SANDR.1127
	picture = GFX_evt_wanshi_desert
	is_triggered_only = yes

	option = {
		name = EVTOPTA_SANDR.1127
		character_event = { id = SANDR.1122 days = 7 }
	}
}

long_character_event = {
	id = SANDR.1128
	desc = EVTDESC_SANDR.1128
	picture = GFX_evt_wanshi_desert
	is_triggered_only = yes
	title = EVTTITLE_SANDR.1124

	immediate = {
		clr_character_flag = outran_sandstorm
		clr_character_flag = found_shelter
	}

	option = {
		name = EVTOPTA_SANDR.1128
		prestige = 25
		wealth = 45
		character_event = { id = SANDR.1011 days = 5 }
		add_artifact = oldCompass
		custom_tooltip = {
			text = SOTAN_TT
			hidden_effect = {
				event_target:retired_racer = {
					leave_court_and_die_effect = yes
				}
			}
		}
	}
}

character_event = {
	id = SANDR.1129
	desc = EVTDESC_SANDR.1129
	picture = GFX_evt_wanshi_desert
	is_triggered_only = yes

	option = {
		name = EVTOPTA_SANDR.1129
		character_event = { id = SANDR.1199 days = 25 random = 30 }
	}
	option = {
		name = EVTOPTB_SANDR.1129
		character_event = { id = SANDR.1035 days = 1 }
	}
}
############################DONATE TO SOCIETY QUEST##############################
society_quest_event = {
	id = SANDR.1073
	desc = EVTDESC_SANDR.1073
	border = GFX_event_letter_frame_war

	is_triggered_only = yes
	
	trigger = {
		society_member_of = sand_sailer_racers
	}

	option = {
		name = ACCEPT
		set_quest = donate_to_sand_society
		set_character_flag = donation_quest
	}

	option = {
		name = DECLINE
		hidden_effect = {
			add_character_modifier = {
				name = quest_cooldown_timer
				hidden = yes
				days = 1050
			}
		}
		ai_chance = { factor = 0 }
	}
}

letter_event = {  #comp letter
	id = SANDR.1074
	desc = EVTDESC_SANDR.1074
	border = GFX_event_letter_frame_war

	is_triggered_only = yes

	option = {
		name = EVTOPTA_SANDR.1074
		clr_quest = donation_quest
		add_society_currency_tiny_effect = yes
		prestige = 1
		random = {
			chance = 5
			add_trait = charitable
		}
	}
}

character_event = { ##Only 10? -Liz
	id = SANDR.1075
	desc = EVTDESC_SANDR.1075
	picture = GFX_evt_relaxed_ruler
	is_triggered_only = yes

	option = {
		name = EVTOPTA_SANDR.1075
		wealth = -5
		character_event = { id = SANDR.1011 days = 5 }
	}
	option = {
		name = EVTOPTB_SANDR.1075
		wealth = -5
		character_event = { id = SANDR.1011 days = 5 }
	}
	option = {
		name = EVTOPTC_SANDR.1075
		wealth = -5
		character_event = { id = SANDR.1011 days = 5 }
	}
	option = {
		name = EVTOPTD_SANDR.1075
		trigger = {
			ROOT = {
				NOT = { is_society_grandmaster = yes }
			}
		}
		wealth = -10
		
		sand_sailer_racers = {
			leader = {
				wealth = 10
			}
		}
		character_event = { id = SANDR.1011 days = 5 }
	}
}
